{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags wagtailroutablepage_tags cache %}

{% block body_class %}template-blogindexpage{% endblock %}

{% block content %}
</div>
<a href="{% routablepageurl page 'latest_posts' %}">Latest</a>
<ul>
    {% for cat in categories %}
    <li>
        <a href="{% routablepageurl page "category_view" cat.slug %}">
            {{ cat }}
        </a>{% if not forloop.last %}, {% endif %}
    </li>
    {% endfor %}
</ul>
{% for post in posts %}
{% cache 604800 blog_post_preview post.id %}
{% image post.blog_image fill-250x250 as blog_img %}
<a href="{{ post.url }}">
    <img src="{{ blog_img.url }}" alt="{{ blog_img.alt }}">
</a>

<h2>
    <a href="{% pageurl post %}">
        {{ post.custom_title }}
        {% if post.specific.subtitle %}
        {{ post.specific.subtitle }}
        {% endif %}
    </a>
</h2>
{% endcache %}
{% endfor %}

{% include "snippets/pagination.html" %}

{% endblock %}